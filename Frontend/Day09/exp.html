<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive React Form Explainer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .code-font {
            font-family: 'Fira Code', monospace;
        }
        .highlight {
            background-color: #fef9c3; /* yellow-100 */
            border-left: 4px solid #facc15; /* yellow-400 */
            transition: all 0.3s ease-in-out;
        }
        .code-line {
            display: block;
            padding: 0.1rem 1rem;
            margin: 0 -1rem;
            border-left: 4px solid transparent;
        }
        .form-container {
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .error-message {
            color: #ef4444; /* red-500 */
            font-size: 0.875rem;
        }
        .error-border {
            border-color: #ef4444;
        }
        .explanation-box {
            transition: all 0.3s ease-in-out;
            min-height: 150px;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 p-4 sm:p-6 md:p-8">

    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-slate-900">Interactive React Form Explainer</h1>
            <p class="mt-2 text-lg text-slate-600">Click on the form fields on the right to see the code and explanation change!</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Code Column -->
            <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                <h2 class="text-2xl font-semibold mb-4 text-slate-900">Your React Code</h2>
                <pre class="code-font text-sm bg-slate-100 p-4 rounded-md overflow-x-auto"><code id="code-block"><!-- Code will be injected here --></code></pre>
            </div>

            <!-- Interactive Form & State Column -->
            <div>
                <div class="bg-white p-6 sm:p-8 rounded-lg border border-slate-200 form-container  top-8">
                    <h2 class="text-2xl font-semibold mb-4 text-slate-900">Live Demo</h2>
                    <form id="interactive-form" class="space-y-4" novalidate>
                        <div>
                            <label for="name" class="block text-sm font-medium text-slate-700">Name:</label>
                            <input type="text" id="name" name="name" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition">
                            <span id="name-error" class="error-message mt-1 block"></span>
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-slate-700">Email:</label>
                            <input type="email" id="email" name="email" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition">
                            <span id="email-error" class="error-message mt-1 block"></span>
                        </div>
                        <div>
                            <label for="country" class="block text-sm font-medium text-slate-700">Country:</label>
                            <select id="country" name="country" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition">
                                <option value="">Select Country</option>
                                <option value="USA">USA</option>
                                <option value="Canada">Canada</option>
                                <option value="UK">UK</option>
                                <option value="Australia">Australia</option>
                                <option value="India">India</option>
                            </select>
                            <span id="country-error" class="error-message mt-1 block"></span>
                        </div>
                        <div>
                            <label for="bio" class="block text-sm font-medium text-slate-700">Tell us about yourself:</label>
                            <textarea id="bio" name="bio" rows="3" placeholder="Share a brief bio..." class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"></textarea>
                            <small id="char-count" class="text-slate-500 block text-right">0/500</small>
                            <span id="bio-error" class="error-message mt-1 block"></span>
                        </div>
                        <div>
                            <label class="flex items-center space-x-3">
                                <input type="checkbox" id="agreeToTerms" name="agreeToTerms" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                <span class="text-sm text-slate-700">I agree to the terms and conditions</span>
                            </label>
                            <span id="agreeToTerms-error" class="error-message mt-1 block"></span>
                        </div>
                        <div class="flex items-center space-x-4">
                            <button type="submit" class="w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition">Submit Form</button>
                            <button type="button" id="reset-btn" class="w-full inline-flex justify-center py-2 px-4 border border-slate-300 shadow-sm text-sm font-medium rounded-md text-slate-700 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition">Reset Form</button>
                        </div>
                    </form>
                </div>
                <div class="mt-8 bg-slate-900 text-white rounded-lg p-6 shadow-lg">
                    <h3 class="text-xl font-semibold mb-4 text-slate-100">Live State Visualization</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <h4 class="text-sm font-medium text-slate-400 mb-1">`formData` State</h4>
                            <pre class="code-font text-sm bg-slate-800 p-3 rounded"><code id="form-data-state"></code></pre>
                        </div>
                        <div>
                            <h4 class="text-sm font-medium text-slate-400 mb-1">`errors` State</h4>
                            <pre class="code-font text-sm bg-slate-800 p-3 rounded"><code id="errors-state"></code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Explanation Section -->
        <div class="mt-10 bg-white p-6 sm:p-8 rounded-lg shadow-sm border border-slate-200 explanation-box">
            <h2 class="text-2xl font-semibold mb-2 text-slate-900">Code Explanation</h2>
            <div id="explanation-content" class="text-slate-700 space-y-2">
                <p>Welcome! This is an interactive guide to your React form component. Interact with the form elements in the "Live Demo" to see how the code works.</p>
                <p>The component uses two main state variables, initialized with the <strong>`useState`</strong> Hook:</p>
                <ul class="list-disc list-inside pl-4">
                    <li><strong>`formData`</strong>: An object that holds the current value of every input in your form.</li>
                    <li><strong>`errors`</strong>: An object that stores any validation error messages. It's empty when there are no errors.</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA AND STATE ---
            const codeText = `
import React from "react";
import { useState } from "react";

function App(){
  const [formData, setFormData] = useState({
    name: "",
    email: "",
    country: "",
    bio:"",
    agreeToTerms:false
  });

  const [errors, setErrors] = useState({});

  const validateEmail=(email)=>{
    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;
    return emailRegex.test(email);
  }

  const handleInputChange=(event)=>{
    const {name, value} = event.target;
    setFormData(prevFormData => ({
      ...prevFormData,
      [name]: value
    }))

    if (name==='email'){
      if (!validateEmail(value)) {
        setErrors(prevErrors => ({
          ...prevErrors,
          email: "Please enter a valid email address"
        }));
      } else {
        setErrors(prevErrors => {
          const newErrors = { ...prevErrors };
          delete newErrors.email;
          return newErrors;
        });
      }
    }
  };

  const validateForm=()=>{
    const newErrors = {};
    if (!formData.name.trim()) {
      newErrors.name = "Name is required";
    }
    if (!formData.email.trim()) {
      newErrors.email = "Email is required";
    } else if (!validateEmail(formData.email)) {
      newErrors.email = "Please enter a valid email address";
    }
    if (!formData.country) {
      newErrors.country = "Country is required";
    }
    if (formData.bio.length > 500) {
      newErrors.bio = "Bio must be 500 characters or less";
    }
    if (!formData.agreeToTerms) {
      newErrors.agreeToTerms = "You must agree to the terms";
    }
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  const handleSubmit=(event)=>{
    event.preventDefault();
    const isValid = validateForm();
    if (!isValid) {
      return; // stop submission if invalid
    }
    console.log("Form Submitted:", formData);
    // In a real app, you'd send data to a server here.
    alert("Form submitted successfully! Check the console.");
  };

  const resetForm=()=>{
    setFormData({
      name: "", email: "", country: "", 
      bio:"", agreeToTerms:false
    });
    setErrors({});
  }

  return(
    <div className="App">
      <h1>Personal Information</h1>
      <form onSubmit={handleSubmit}>
        <div>
          <label htmlFor="name">Name:</label>
          <input type="text" id="name" name="name"
            value={formData.name}
            onChange={handleInputChange}
          />
          {errors.name && <span>{errors.name}</span>}
        </div>
        <div>
          <label htmlFor="email">Email:</label>
          <input type="email" id="email" name="email"
            value={formData.email}
            onChange={handleInputChange}
          />
          {errors.email && <span>{errors.email}</span>}
        </div>
        <div>
          <label htmlFor="country">Country:</label>
          <select id="country" name="country"
            value={formData.country}
            onChange={handleInputChange}
          >
            <option value="">Select Country</option>
            {/* ...options */}
          </select>
          {errors.country && <span>{errors.country}</span>}
        </div>
        <div>
          <label htmlFor="bio">Tell us about yourself:</label>
          <textarea id="bio" name="bio"
            value={formData.bio}
            onChange={handleInputChange}
          />
          {/* ...character count */}
        </div>
        <div>
          <label>
            <input type="checkbox" id="agreeToTerms"
              checked={formData.agreeToTerms}
              onChange={/* special handler */}
            />
            I agree to the terms and conditions
          </label>
          {errors.agreeToTerms && <span>{errors.agreeToTerms}</span>}
        </div>
        <button type="submit">Submit Form</button>
        <button type="button" onClick={resetForm}>Reset Form</button>
      </form>
    </div>
  );
}
export default App;
`.trim();

            const explanations = {
                default: `
                    <p>Welcome! This is an interactive guide to your React form component. Interact with the form elements in the "Live Demo" to see how the code works.</p>
                    <p>The component uses two main state variables, initialized with the <strong>\`useState\`</strong> Hook:</p>
                    <ul class="list-disc list-inside pl-4">
                        <li><strong>\`formData\`</strong>: An object that holds the current value of every input in your form.</li>
                        <li><strong>\`errors\`</strong>: An object that stores any validation error messages. It's empty when there are no errors.</li>
                    </ul>`,
                state: `
                    <p><strong>State Initialization:</strong> The component's "memory" is set up using the <strong>\`useState\`</strong> Hook.</p>
                    <ul class="list-disc list-inside pl-4">
                        <li><strong>\`const [formData, setFormData]\`</strong>: Creates a state variable \`formData\` to hold all form values. The \`setFormData\` function is the only way to update it.</li>
                        <li><strong>\`const [errors, setErrors]\`</strong>: Creates a state variable \`errors\` to hold validation messages. \`setErrors\` is used to update it.</li>
                    </ul>`,
                handleInputChange: `
                    <p><strong>Event Handler: \`handleInputChange\`</strong></p>
                    <p>This function runs every time you type in an input field (except the checkbox).</p>
                    <ul class="list-disc list-inside pl-4">
                        <li>It gets the \`name\` and \`value\` from the input that triggered the event.</li>
                        <li>It calls <strong>\`setFormData\`</strong> to update the state. The spread syntax (\`...prevFormData\`) copies the old state, and the computed property (\`[name]: value\`) updates only the field that changed. This makes the function reusable for multiple inputs.</li>
                    </ul>`,
                emailValidation: `
                    <p><strong>Real-Time Email Validation:</strong></p>
                    <p>Inside \`handleInputChange\`, there's a special check: <strong>\`if (name === 'email')\`</strong>. As you type in the email field, this block runs:</p>
                    <ul class="list-disc list-inside pl-4">
                        <li>It calls the <strong>\`validateEmail\`</strong> helper function.</li>
                        <li>If the email is invalid, it uses <strong>\`setErrors\`</strong> to add an \`email\` property to the errors state, showing the error message immediately.</li>
                        <li>If the email becomes valid, it removes the \`email\` property from the errors state.</li>
                    </ul>`,
                checkbox: `
                    <p><strong>Checkbox Handling:</strong></p>
                    <p>The checkbox is slightly different. Instead of a text \`value\`, it uses a boolean \`checked\` property.</p>
                    <ul class="list-disc list-inside pl-4">
                        <li>The \`onChange\` handler for the checkbox is an inline function that directly updates the \`agreeToTerms\` property in the \`formData\` state based on \`event.target.checked\`.</li>
                    </ul>`,
                handleSubmit: `
                    <p><strong>Form Submission: \`handleSubmit\`</strong></p>
                    <p>This function runs when you click the "Submit Form" button.</p>
                    <ul class="list-disc list-inside pl-4">
                        <li><strong>\`event.preventDefault()\`</strong>: This crucial line stops the browser from its default behavior of reloading the page on form submission.</li>
                        <li>It calls <strong>\`validateForm()\`</strong> to check all fields.</li>
                        <li>If \`validateForm\` returns \`false\`, the function stops immediately.</li>
                        <li>If \`true\`, it means the form is valid. The code then logs the data and shows a success message. In a real app, this is where you'd send the data to a server.</li>
                    </ul>`,
                validateForm: `
                    <p><strong>Full Validation: \`validateForm\`</strong></p>
                    <p>This function is called by \`handleSubmit\` to perform a final check on all fields before submission.</p>
                    <ul class="list-disc list-inside pl-4">
                        <li>It creates an empty \`newErrors\` object.</li>
                        <li>It checks each property of the \`formData\` state against its rules (e.g., not empty, valid email, etc.).</li>
                        <li>For each rule that fails, it adds a corresponding key and message to \`newErrors\`.</li>
                        <li>Finally, it calls <strong>\`setErrors(newErrors)\`</strong> to update the UI with all current errors and returns \`true\` (if no errors) or \`false\` (if errors were found).</li>
                    </ul>`,
                resetForm: `
                    <p><strong>Resetting the Form: \`resetForm\`</strong></p>
                    <p>This function is triggered by the "Reset Form" button's \`onClick\` event.</p>
                    <ul class="list-disc list-inside pl-4">
                        <li>It calls <strong>\`setFormData\`</strong> to restore the form data state to its initial, empty values.</li>
                        <li>It calls <strong>\`setErrors\`</strong> with an empty object to clear all validation messages from the screen.</li>
                    </ul>`
            };

            const lineMappings = {
                state: [5, 13],
                handleInputChange: [21, 22, 23, 24, 25, 26, 27],
                emailValidation: [29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42],
                validateForm: [45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66],
                handleSubmit: [68, 69, 70, 71, 72, 73, 74, 75, 76],
                resetForm: [79, 80, 81, 82, 83, 84],
                name: [91, 92, 93, 94, 95, 96, 97],
                email: [99, 100, 101, 102, 103, 104, 105],
                country: [107, 108, 109, 110, 111, 112, 113],
                bio: [117, 118, 119, 120, 121],
                agreeToTerms: [125, 126, 127, 128, 129, 130, 131],
                submitBtn: [133],
                resetBtn: [134]
            };

            // --- DOM ELEMENTS ---
            const codeBlock = document.getElementById('code-block');
            const explanationContent = document.getElementById('explanation-content');
            const form = document.getElementById('interactive-form');
            const inputs = form.querySelectorAll('input, select, textarea');
            const formDataStateEl = document.getElementById('form-data-state');
            const errorsStateEl = document.getElementById('errors-state');
            const resetBtn = document.getElementById('reset-btn');
            const charCountEl = document.getElementById('char-count');

            // --- SIMULATED REACT STATE ---
            let formData = {
                name: "",
                email: "",
                country: "",
                bio: "",
                agreeToTerms: false
            };
            let errors = {};

            // --- FUNCTIONS ---
            function highlightLines(lines = []) {
                document.querySelectorAll('.code-line').forEach(el => el.classList.remove('highlight'));
                if (lines.length > 0) {
                    lines.forEach(lineNum => {
                        const el = document.querySelector(`.code-line[data-line="${lineNum}"]`);
                        if (el) el.classList.add('highlight');
                    });
                }
            }

            function updateExplanation(key) {
                explanationContent.innerHTML = explanations[key] || explanations.default;
            }

            function updateStateDisplay() {
                formDataStateEl.textContent = JSON.stringify(formData, null, 2);
                errorsStateEl.textContent = JSON.stringify(errors, null, 2);
            }
            
            function renderCode() {
                const lines = codeText.split('\n');
                codeBlock.innerHTML = lines.map((line, index) => 
                    `<span class="code-line" data-line="${index + 1}">${line.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</span>`
                ).join('');
            }
            
            function validateEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }

            function displayErrors() {
                Object.keys(formData).forEach(key => {
                    const errorEl = document.getElementById(`${key}-error`);
                    const inputEl = document.getElementById(key);
                    if (errorEl) {
                        errorEl.textContent = errors[key] || '';
                    }
                    if (inputEl) {
                        if (errors[key]) {
                            inputEl.classList.add('error-border');
                        } else {
                            inputEl.classList.remove('error-border');
                        }
                    }
                });
            }

            function runFullValidation() {
                const newErrors = {};
                if (!formData.name.trim()) newErrors.name = "Name is required";
                if (!formData.email.trim()) {
                    newErrors.email = "Email is required";
                } else if (!validateEmail(formData.email)) {
                    newErrors.email = "Please enter a valid email address";
                }
                if (!formData.country) newErrors.country = "Country is required";
                if (formData.bio.length > 500) newErrors.bio = "Bio must be 500 characters or less";
                if (!formData.agreeToTerms) newErrors.agreeToTerms = "You must agree to the terms";
                
                errors = newErrors;
                displayErrors();
                updateStateDisplay();
                return Object.keys(newErrors).length === 0;
            }

            // --- EVENT LISTENERS ---
            inputs.forEach(input => {
                const name = input.name;
                
                // Focus event for highlighting
                input.addEventListener('focus', () => {
                    let explanationKey = 'handleInputChange';
                    let lines = [...lineMappings.handleInputChange, ...lineMappings[name]];
                    
                    if (name === 'agreeToTerms') {
                        explanationKey = 'checkbox';
                        lines = lineMappings.agreeToTerms;
                    }
                    if (name === 'email') {
                         lines.push(...lineMappings.emailValidation);
                    }

                    highlightLines(lines);
                    updateExplanation(explanationKey);
                });

                // Input event for state change and validation
                input.addEventListener('input', (e) => {
                    const value = e.target.type === 'checkbox' ? e.target.checked : e.target.value;
                    formData[name] = value;

                    if (name === 'email') {
                        if (value.trim() && !validateEmail(value)) {
                            errors.email = "Please enter a valid email address";
                        } else {
                            delete errors.email;
                        }
                        displayErrors();
                        updateExplanation('emailValidation');
                        highlightLines([...lineMappings.handleInputChange, ...lineMappings.email, ...lineMappings.emailValidation]);
                    }

                    if (name === 'bio') {
                        charCountEl.textContent = `${value.length}/500`;
                        charCountEl.classList.toggle('text-red-500', value.length > 500);
                    }

                    updateStateDisplay();
                });
            });

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                highlightLines([...lineMappings.handleSubmit, ...lineMappings.validateForm]);
                updateExplanation('handleSubmit');
                const isValid = runFullValidation();
                if (isValid) {
                    console.log("Form Submitted:", formData);
                    setTimeout(() => alert("Form submitted successfully! Check the browser console (F12) for the data."), 100);
                } else {
                     setTimeout(() => {
                        updateExplanation('validateForm');
                        highlightLines(lineMappings.validateForm);
                     }, 500);
                }
            });

            resetBtn.addEventListener('click', () => {
                form.reset();
                formData = { name: "", email: "", country: "", bio: "", agreeToTerms: false };
                errors = {};
                displayErrors();
                updateStateDisplay();
                charCountEl.textContent = '0/500';
                charCountEl.classList.remove('text-red-500');
                
                highlightLines(lineMappings.resetForm);
                updateExplanation('resetForm');
            });

            // --- INITIALIZATION ---
            renderCode();
            updateStateDisplay();
            highlightLines(lineMappings.state);
            updateExplanation('state');
        });
    </script>
</body>
</html>
